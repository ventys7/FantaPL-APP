import{v as pe,u as ue,r as i,w as me,x as J,j as e,L as Z,b as H,m as he,q as P,p as ge,y as be,z as fe,B as V,X as O,P as we,S as ve,f as je,d as p,D as u,i as Ne,Q as w,t as ye,F as T}from"./index-CBI5I5a4.js";import{T as M}from"./trash-2-CqXNl_Wv.js";const W="real_teams",Ce=()=>{const{players:L,loading:ee,refresh:$,teams:te}=pe(),{user:_e,hasRole:se}=ue(),[m,k]=i.useState([]);i.useEffect(()=>{k(L)},[L]);const[z,ae]=i.useState([]),[x,B]=i.useState(null),[re,I]=i.useState(!1),[E,R]=i.useState(!1),[ie,S]=i.useState([]),[o,h]=i.useState({}),[oe,le]=i.useState(null),ne=t=>m.filter(s=>s.team_id===t&&s.position==="Portiere"),[v,A]=i.useState(""),[j,F]=i.useState("Tutti"),[N,Q]=i.useState("Tutti"),[g,G]=i.useState("Tutti"),[b,U]=i.useState(!1),[y,K]=i.useState(!1),[q,f]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const r=(await p.listDocuments(u,Ne,[w.limit(100),w.equal("hidden",!1)])).documents.filter(a=>a.role!=="g_admin").map(a=>({name:a.manager_name,id:a.$id}));ae(r)}catch(s){console.error("Error fetching managers:",s)}})()},[]),i.useEffect(()=>{if(!E)return;(async()=>{try{const s=await p.listDocuments(u,W,[w.limit(50)]);S(s.documents)}catch(s){console.error("Error fetching teams:",s)}})()},[E]);const D=async(t,s,r,a)=>{try{await p.updateDocument(u,W,t,{goalkeeper_owner:s,goalkeeper_quotation:r,goalkeeper_purchase_price:a});const c=(await p.listDocuments(u,T,[w.equal("team_id",t),w.equal("position","Portiere"),w.limit(10)])).documents.map(n=>p.updateDocument(u,T,n.$id,{owner:s}));await Promise.all(c),S(n=>n.map(d=>d.$id===t?{...d,goalkeeper_owner:s,goalkeeper_quotation:r,goalkeeper_purchase_price:a}:d)),k(n=>n.map(d=>d.team_id===t&&d.position==="Portiere"?{...d,owner:s}:d))}catch(l){console.error("Error saving block:",l),alert("Errore salvataggio blocco: "+l.message)}},X=t=>{B(t),h({position:t.position,quotation:t.quotation||0,purchase_price:t.purchase_price||0,owner:t.owner||""}),I(!0)},C=()=>{I(!1),B(null),h({})},ce=async()=>{if(!x)return;f(!0);const t={position:o.position,quotation:parseInt(o.quotation),purchase_price:parseInt(o.purchase_price),owner:o.owner===""?null:o.owner};({...x,...t},k(s=>s.map(r=>r.$id===x.$id?{...r,...t}:r))),C();try{await p.updateDocument(u,T,x.$id,t)}catch(s){console.error("Save error:",s),alert(`Errore salvataggio: ${s.message}`),$()}finally{f(!1)}},Y=async(t,s)=>{if(t.stopPropagation(),!!window.confirm(`Sei sicuro di voler eliminare definitivamente ${s.name}?`)){f(!0);try{await p.deleteDocument(u,T,s.$id),k(r=>r.filter(a=>a.$id!==s.$id))}catch(r){console.error("Delete error:",r),alert(`Errore eliminazione: ${r.message}`)}finally{f(!1)}}},de="reset_squads",xe=async()=>{if(window.confirm(`⚠️ SEI SICURO?

Questo svuoterà TUTTE le rose:
- Rimuoverà proprietari da tutti i giocatori
- Resetterà prezzi a 0
- Le QUOTAZIONI rimangono invariate

Questa azione NON può essere annullata!`)){f(!0);try{const t=await ye.createExecution(de,"{}",!0);if(t.status==="completed"){const s=t.responseBody?JSON.parse(t.responseBody):{};s.success?(alert(`✅ Rose svuotate!

Giocatori: ${s.playersReset}
Blocchi: ${s.teamsReset}`),$()):alert(`Errore: ${s.error}`)}else alert("⏳ Reset in corso (background). Ricarica la pagina tra qualche secondo."),setTimeout($,3e3)}catch(t){console.error("Reset error:",t),alert(`Errore reset: ${t.message}`)}finally{f(!1)}}},_=i.useMemo(()=>{let t=m;if(t=t.filter(s=>s.position!=="Portiere"),v&&(t=t.filter(s=>me(s.name,v))),j!=="Tutti"&&(t=t.filter(s=>s.team_short_name===j)),N!=="Tutti"&&(t=t.filter(s=>s.position===N)),g!=="Tutti"&&(g==="Svincolati"?t=t.filter(s=>!s.owner):t=t.filter(s=>s.owner===g)),y&&(t=t.filter(s=>!s.is_active)),b&&m.length>0){const s=m.map(l=>new Date(l.created_at).getTime()),a=Math.max(...s)-20*60*1e3;return t.filter(l=>new Date(l.created_at).getTime()>a).sort((l,c)=>new Date(c.created_at).getTime()-new Date(l.created_at).getTime())}return t.sort((s,r)=>{const a=(J[s.position]||99)-(J[r.position]||99);if(a!==0)return a;const l=(s.team_short_name||"").localeCompare(r.team_short_name||"");if(l!==0)return l;const c=(r.quotation||0)-(s.quotation||0);return c!==0?c:s.name.localeCompare(r.name)})},[m,v,j,N,g,b,y]);return ee&&m.length===0?e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(Z,{className:"animate-spin text-pl-teal"})}):e.jsxs("div",{className:"p-4 md:p-8 max-w-full mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center text-center gap-2 mb-8",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-white flex items-center justify-center gap-3",children:[e.jsx(he,{className:"text-pl-teal w-8 h-8"}),"Gestione Listone"]}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 max-w-md mx-auto",children:"Modifica ruoli, quotazioni e proprietari. Le modifiche sono istantanee."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-pl-teal/10 text-pl-teal rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-pl-teal/20 transition border border-pl-teal/20",children:[e.jsx(P,{size:14}),"Gestione Blocchi Portieri"]}),se("g_admin")&&e.jsxs("button",{onClick:xe,disabled:q,className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-red-500/20 transition border border-red-500/20 disabled:opacity-50",children:[e.jsx(M,{size:14}),"Svuota Rose"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap gap-2 mt-4 w-full justify-center",children:[e.jsxs("div",{className:"relative group w-full md:w-auto",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-hover:text-pl-teal transition-colors w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Cerca...",value:v,onChange:t=>A(t.target.value),className:"h-[42px] bg-black/30 border border-white/10 rounded-xl pl-9 pr-4 text-sm text-white w-full md:w-56 focus:border-pl-teal/50 outline-none transition-all placeholder-gray-600 focus:bg-black/50"})]}),e.jsxs("button",{onClick:()=>U(!b),className:`h-[42px] px-4 rounded-xl border flex items-center justify-start gap-2 text-sm font-bold transition whitespace-nowrap w-full md:w-fit ${b?"bg-pl-teal text-pl-dark border-pl-teal":"bg-black/30 border-white/10 text-gray-300 hover:bg-black/40"}`,children:[e.jsx(be,{size:16}),"Nuovi"]}),e.jsxs("button",{onClick:()=>K(!y),className:`h-[42px] px-4 rounded-xl border flex items-center justify-start gap-2 text-sm font-bold transition whitespace-nowrap w-full md:w-fit ${y?"bg-red-500 text-white border-red-500":"bg-black/30 border-white/10 text-gray-300 hover:bg-black/40"}`,title:"Mostra solo inattivi",children:[e.jsx(fe,{size:16}),"Inattivi"]}),e.jsxs("select",{value:N,onChange:t=>Q(t.target.value),className:"h-[42px] bg-black/30 border border-white/10 rounded-xl px-4 text-sm text-gray-300 outline-none hover:bg-black/40 transition cursor-pointer w-full md:w-fit text-left",children:[e.jsx("option",{value:"Tutti",children:"Tutti i Ruoli"}),V.filter(t=>t!=="Portiere").map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:j,onChange:t=>F(t.target.value),className:"h-[42px] bg-black/30 border border-white/10 rounded-xl px-4 text-sm text-gray-300 outline-none hover:bg-black/40 transition cursor-pointer w-full md:w-fit text-left",children:[e.jsx("option",{value:"Tutti",children:"Tutte le Squadre"}),te.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:g,onChange:t=>G(t.target.value),className:"h-[42px] bg-black/30 border border-white/10 rounded-xl px-4 text-sm text-gray-300 outline-none hover:bg-black/40 transition cursor-pointer w-full md:w-fit text-left",children:[e.jsx("option",{value:"Tutti",children:"Tutti i Proprietari"}),e.jsx("option",{value:"Svincolati",children:"Svincolati"}),z.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),(v||b||y||N!=="Tutti"||j!=="Tutti"||g!=="Tutti")&&e.jsx("button",{onClick:()=>{A(""),U(!1),K(!1),Q("Tutti"),F("Tutti"),G("Tutti")},className:"h-[42px] w-[42px] rounded-xl border border-red-500/30 bg-red-500/10 text-red-400 hover:bg-red-500/20 flex items-center justify-center transition",title:"Resetta Filtri",children:e.jsx(O,{size:20})})]}),e.jsx("div",{className:"hidden md:block bg-[#1e1e24] border border-white/5 rounded-2xl overflow-hidden shadow-2xl max-w-6xl mx-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-base",children:[e.jsx("thead",{className:"bg-black/40 text-gray-400 font-bold uppercase text-sm tracking-wider sticky top-0 backdrop-blur-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Giocatore"}),e.jsx("th",{className:"px-6 py-4 w-40",children:"Ruolo"}),e.jsx("th",{className:"px-6 py-4 w-32 text-center",children:"Quotazione"}),e.jsx("th",{className:"px-6 py-4 w-32 text-center",children:"Prezzo"}),e.jsx("th",{className:"px-6 py-4 w-56",children:"Proprietario"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-500 italic",children:"Nessun giocatore trovato"})}):_.slice(0,150).map(t=>e.jsxs("tr",{onClick:()=>X(t),className:"hover:bg-white/[0.03] transition-colors cursor-pointer group",children:[e.jsx("td",{className:"px-6 py-3",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:`font-semibold transition-colors text-base flex items-center gap-2 ${t.is_active?"text-white group-hover:text-pl-teal":"text-gray-500 italic decoration-slate-600"}`,children:[t.name," ",!t.is_active&&"*",!t.is_active&&e.jsx("button",{onClick:s=>Y(s,t),title:"Elimina definitivamente",className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white p-1 rounded transition ml-2",children:e.jsx(M,{size:12})})]}),e.jsx("span",{className:`text-xs uppercase tracking-wide font-medium ${t.is_active?"text-gray-500":"text-gray-600"}`,children:t.team_short_name})]})})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs uppercase font-bold tracking-widest border border-current opacity-80
                                                ${t.position==="Portiere"?"text-yellow-500 border-yellow-500/20 bg-yellow-500/10":t.position==="Difensore"?"text-blue-500 border-blue-500/20 bg-blue-500/10":t.position==="Centrocampista"?"text-green-500 border-green-500/20 bg-green-500/10":"text-red-500 border-red-500/20 bg-red-500/10"}`,children:t.position})}),e.jsx("td",{className:"px-6 py-3 text-center",children:e.jsx("span",{className:"text-gray-300 font-mono text-base",children:t.quotation})}),e.jsx("td",{className:"px-6 py-3 text-center",children:e.jsx("span",{className:`font-mono text-base ${t.purchase_price>0?"text-pl-teal font-bold":"text-gray-600"}`,children:t.purchase_price||"-"})}),e.jsx("td",{className:"px-6 py-3",children:t.owner?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-pl-teal shadow-[0_0_8px_rgba(56,189,248,0.5)]"}),e.jsx("span",{className:"text-sm text-white font-medium",children:t.owner})]}):e.jsx("span",{className:"text-sm text-gray-600 italic",children:"Svincolato"})})]},t.$id))})]})})}),e.jsxs("div",{className:"md:hidden space-y-3 pb-20 w-full max-w-2xl mx-auto",children:[_.length===0?e.jsx("div",{className:"text-center text-gray-500 py-10 bg-white/5 rounded-xl border border-white/5",children:"Nessun risultato"}):_.slice(0,50).map(t=>e.jsxs("div",{onClick:()=>X(t),className:"bg-[#1e1e24] border border-white/5 rounded-xl p-4 active:scale-[0.98] transition-all cursor-pointer shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${t.position==="Portiere"?"bg-yellow-500":t.position==="Difensore"?"bg-blue-500":t.position==="Centrocampista"?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{className:"flex justify-between items-start pl-3",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2 text-left",children:[e.jsxs("h3",{className:`font-bold text-base flex items-center justify-start gap-2 ${t.is_active?"text-white":"text-gray-500 italic"}`,children:[e.jsx("span",{className:"truncate",children:t.name}),!t.is_active&&"*",!t.is_active&&e.jsx("button",{onClick:s=>Y(s,t),className:"bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white p-1 rounded-full transition flex-shrink-0",children:e.jsx(M,{size:14})})]}),e.jsx("div",{className:"text-[11px] text-gray-400 font-medium uppercase tracking-wide mt-0.5 mb-1 truncate",children:t.team_short_name||t.team_name||"-"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Prezzo"}),e.jsx("div",{className:`font-mono font-bold ${t.purchase_price>0?"text-pl-teal":"text-gray-600"}`,children:t.purchase_price||"-"})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/5 flex items-center justify-between pl-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Quotazione"}),e.jsx("span",{className:"text-sm text-white font-mono",children:t.quotation})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Proprietario"}),t.owner?e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-pl-teal shadow-[0_0_6px_rgba(56,189,248,0.5)]"}),e.jsx("span",{className:"text-xs text-white font-medium",children:t.owner})]}):e.jsx("span",{className:"text-xs text-gray-600 italic mt-0.5",children:"Svincolato"})]})]})]},t.$id)),_.length>50&&e.jsx("div",{className:"py-3 text-center text-xs text-gray-600",children:"Mostrati primi 50. Usa i filtri."})]})]}),re&&x&&H.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 transition-opacity animate-in fade-in duration-200",onClick:C}),e.jsxs("div",{className:"relative w-full max-w-lg mx-4 bg-[#18181b] rounded-2xl border border-white/10 shadow-[0_20px_60px_-15px_rgba(0,0,0,0.5)] overflow-hidden animate-in zoom-in-95 fade-in duration-200",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-pl-teal/50 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(we,{size:18,className:"text-pl-teal"}),"Modifica Giocatore"]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[x.name," (",x.team_short_name,")"]})]}),e.jsx("button",{onClick:C,className:"text-gray-500 hover:text-white transition p-2 hover:bg-white/10 rounded-lg",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500 tracking-wider",children:"Ruolo Fanta"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:V.map(t=>e.jsx("button",{onClick:()=>h({...o,position:t}),className:`py-2 px-1 rounded-lg text-[10px] font-bold uppercase transition border ${o.position===t?t==="Portiere"?"bg-yellow-500 text-black border-yellow-500":t==="Difensore"?"bg-blue-500 text-white border-blue-500":t==="Centrocampista"?"bg-green-500 text-white border-green-500":"bg-red-500 text-white border-red-500":"bg-white/5 text-gray-400 border-transparent hover:bg-white/10"}`,children:t},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500 tracking-wider",children:"Quotazione"}),e.jsx("input",{type:"number",value:o.quotation,onChange:t=>h({...o,quotation:t.target.value}),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-pl-teal outline-none transition font-mono"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs uppercase font-bold text-gray-500 tracking-wider",children:"Prezzo Acquisto"}),e.jsx("input",{type:"number",value:o.purchase_price,onChange:t=>h({...o,purchase_price:t.target.value}),className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-pl-teal outline-none transition font-mono"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"text-xs uppercase font-bold text-gray-500 tracking-wider flex justify-between",children:["Proprietario",o.position==="Portiere"&&e.jsxs("span",{className:"text-pl-teal text-[10px] items-center flex gap-1",children:[e.jsx(P,{size:10})," Gestito da Blocco Squadra"]})]}),e.jsxs("select",{value:o.owner,onChange:t=>h({...o,owner:t.target.value}),disabled:o.position==="Portiere",className:`w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-pl-teal outline-none transition ${o.position==="Portiere"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:"-- Svincolato --"}),z.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"p-6 border-t border-white/5 flex justify-end gap-3 bg-black/20 rounded-b-2xl",children:[e.jsx("button",{onClick:C,className:"px-5 py-2.5 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition",children:"Annulla"}),e.jsxs("button",{onClick:ce,disabled:q,className:"px-6 py-2.5 rounded-xl text-sm font-bold text-pl-dark bg-pl-teal hover:bg-pl-teal/90 transition shadow-lg shadow-pl-teal/20 flex items-center gap-2",children:[q?e.jsx(Z,{size:16,className:"animate-spin"}):e.jsx(ve,{size:16}),"Salva Modifiche"]})]})]})]}),document.body),E&&H.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>R(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-[#18181b] rounded-2xl border border-white/10 shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-black/20",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(P,{className:"text-pl-teal",size:20}),"Blocchi Portieri"]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Assegna l'intero reparto portieri a un manager."})]}),e.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white",children:e.jsx(O,{size:20})})]}),e.jsx("div",{className:"p-4 md:p-6 overflow-y-auto space-y-4 max-h-[70vh]",children:ie.sort((t,s)=>(t.short_name||"").localeCompare(s.short_name||"")).map(t=>{const s=oe===t.$id,r=ne(t.$id);return e.jsxs("div",{className:"bg-[#1e1e24] border border-white/5 rounded-xl overflow-hidden shadow-lg transition-all hover:border-white/10",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer bg-white/[0.02] hover:bg-white/[0.05] transition",onClick:()=>le(s?null:t.$id),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0",children:t.logo_url?e.jsx("img",{src:t.logo_url,alt:t.short_name,className:"w-full h-full object-contain drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]"}):e.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-gray-800 to-black border border-white/10 flex items-center justify-center font-bold text-gray-500 text-xs shadow-inner",children:t.short_name?t.short_name.substring(0,3):t.name.substring(0,3)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-lg tracking-wide",children:t.short_name||t.name}),e.jsxs("div",{className:"text-xs text-gray-400 mt-0.5 font-medium",children:[r.length," Portieri"]})]})]}),e.jsx("div",{className:`p-2 rounded-full transition-transform duration-300 ${s?"rotate-180 bg-white/10":""}`,children:e.jsx(je,{size:20,className:"text-gray-400"})})]}),s&&e.jsxs("div",{className:"p-4 border-t border-white/5 bg-black/20 space-y-6 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-6 space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 tracking-wider",children:"Proprietario Blocco"}),e.jsxs("select",{value:t.goalkeeper_owner||"",onChange:a=>D(t.$id,a.target.value||null,t.goalkeeper_quotation||0,t.goalkeeper_purchase_price||0),onClick:a=>a.stopPropagation(),className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2.5 text-sm text-white focus:border-pl-teal outline-none transition",children:[e.jsx("option",{value:"",children:"-- Svincolato --"}),z.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))]})]}),e.jsxs("div",{className:"md:col-span-3 space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 tracking-wider",children:"Quot. Totale"}),e.jsx("input",{type:"number",value:t.goalkeeper_quotation||"",onChange:a=>{const l=a.target.value===""?0:parseInt(a.target.value)||0;S(c=>c.map(n=>n.$id===t.$id?{...n,goalkeeper_quotation:l}:n))},onBlur:a=>D(t.$id,t.goalkeeper_owner,parseInt(a.target.value)||0,t.goalkeeper_purchase_price||0),onClick:a=>a.stopPropagation(),placeholder:"0",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2.5 text-sm text-white focus:border-pl-teal outline-none font-mono text-center"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-1.5",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-gray-500 tracking-wider",children:"Prezzo Asta"}),e.jsx("input",{type:"number",value:t.goalkeeper_purchase_price||"",onChange:a=>{const l=a.target.value===""?0:parseInt(a.target.value)||0;S(c=>c.map(n=>n.$id===t.$id?{...n,goalkeeper_purchase_price:l}:n))},onBlur:a=>D(t.$id,t.goalkeeper_owner,t.goalkeeper_quotation||0,parseInt(a.target.value)||0),onClick:a=>a.stopPropagation(),placeholder:"0",className:"w-full bg-black/40 border border-white/10 rounded-xl px-3 py-2.5 text-sm text-pl-teal font-bold focus:border-pl-teal outline-none font-mono text-center"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs uppercase font-bold text-gray-500 tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(P,{size:10}),"Portieri Inclusi"]}),e.jsxs("div",{className:"space-y-2",children:[r.map(a=>e.jsx("div",{className:"flex justify-between items-center bg-black/40 p-2 rounded-lg border border-white/5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a.is_active?"bg-green-500":"bg-red-500"} shadow-[0_0_4px_currentColor]`}),e.jsx("span",{className:`text-sm ${a.is_active?"text-gray-300":"text-gray-500 italic line-through"}`,children:a.name})]})},a.$id)),r.length===0&&e.jsx("div",{className:"text-xs text-gray-600 italic",children:"Nessun portiere trovato."})]})]})]})]},t.$id)})})]})]}),document.body)]})};export{Ce as AdminPlayers};
